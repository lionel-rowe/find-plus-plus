<style>
	::highlight(__HIGHLIGHT_ALL_ID__) {
		color: black;
		background: yellow;
	}
	::highlight(__HIGHLIGHT_ONE_ID__) {
		color: black;
		background: orange;
	}
	__CUSTOM_ELEMENT_NAME__[hidden] {
		/* in case of interference from badly behaved page styles (looking at you us04web.zoom.us) */
		display: none !important;
	}
</style>

<template id="__TEMPLATE_ID__">
	<style>
		.regex-find {
			/* == Number.MAX_SAFE_INTEGER == 0x1fffffffffffff */
			z-index: 9007199254740991;

			--border-color: #bbb;
			--border-width: 1px;
			--border-radius: 0.2rem;

			position: fixed;
			top: 0;
			right: 0;
			width: 20rem;

			color-scheme: dark;
			color: white;
			background: #222;
			padding: 0.8rem;
			border-width: var(--border-width);
			border-color: var(--border-color);
			border-style: none none solid solid;
			border-radius: 0 0 0 var(--border-radius);

			label {
				display: flex;
				flex-direction: column;
			}

			.info {
				min-height: 1.3rem;
				display: flex;
				justify-content: space-between;

				button {
					background: unset;
					border: unset;
					font-size: unset;
					padding: unset;
					cursor: pointer;
					padding: 0 0.3rem;
					opacity: 0.6;

					&:hover {
						opacity: 8;
					}
				}

				&.error {
					color: #f88;
				}

				&:is(.empty, .error) {
					button {
						display: none;
					}
				}

				.flags:not([hidden]) {
					display: flex;
					gap: 0.3rem;
					align-items: end;
				}
			}

			.textarea {
				padding: 0.3rem;
				margin: 0.3rem 0;
				border: var(--border-width) solid var(--border-color);
				border-radius: var(--border-radius);
			}
		}
	</style>
	<div class="regex-find">
		<label>
			Find++
			<div class="textarea" contenteditable="plaintext-only"></div>
		</label>

		<div class="info">
			<div>
				<!-- <button data-set-index="0">«</button> -->
				<button data-set-index="n-1">‹</button>
				<small class="info-message"></small>
				<button data-set-index="n+1">›</button>
				<!-- <button data-set-index="-1">»</button> -->
			</div>
			<form class="flags">
				<label for="regex-syntax"><abbr title="Enable regex syntax">/re/</abbr></label>
				<input type="checkbox" id="regex-syntax" name="regex-syntax" checked>
				<label for="ignore-case"><abbr title="Ignore case">i</abbr></label>
				<input type="checkbox" id="ignore-case" name="ignore-case" checked>
				<label for="whole-word"><abbr title="Whole word">\b</abbr></label>
				<input type="checkbox" id="whole-word" name="whole-word">
			</form>
		</div>
	</div>
</template>
